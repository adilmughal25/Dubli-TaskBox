"use strict";

const expect = require('chai').expect;
const addSubIdToTrackingUrl = require('../../src/utils/add-subid-to-tracking-url');
const _id = () => Math.random().toString(36).slice(2);
const _ = require('lodash');

const NETWORKS = {
  adcell: [
    ['https://www.adcell.de/promotion/click/promoId/1234/slotId/5678', 'https://www.adcell.de/promotion/click/promoId/1234/slotId/5678/subid/{{SubId}}?afsrc=1'],
    ['https://www.adcell.de/promotion/click/promoId/1234/slotId/5678/subid/'+_id(), 'https://www.adcell.de/promotion/click/promoId/1234/slotId/5678/subid/{{SubId}}?afsrc=1'],
    ['https://www.adcell.de/promotion/click/promoId/1234/slotId/5678/subid/{{SubId}}', 'https://www.adcell.de/promotion/click/promoId/1234/slotId/5678/subid/{{SubId}}?afsrc=1'],
  ],

  admitad: [
    ['https://ad.admitad.com/g/1234567890abcdef/', 'https://ad.admitad.com/g/1234567890abcdef/?afsrc=1&subid={{SubId}}'],
    ['https://ad.admitad.com/g/1234567890abcdef/?subid='+_id(), 'https://ad.admitad.com/g/1234567890abcdef/?afsrc=1&subid={{SubId}}'],
    ['https://ad.admitad.com/g/1234567890abcdef/?subid={{SubId}}', 'https://ad.admitad.com/g/1234567890abcdef/?afsrc=1&subid={{SubId}}'],
  ],

  affiliatewindow: [
    ['http://www.awin1.com/awclick.php?mid=1234&id=5678', 'http://www.awin1.com/awclick.php?afsrc=1&mid=1234&id=5678&clickref={{SubId}}'],
    ['http://www.awin1.com/awclick.php?mid=1234&id=5678&clickref='+_id(), 'http://www.awin1.com/awclick.php?afsrc=1&mid=1234&id=5678&clickref={{SubId}}'],
    ['http://www.awin1.com/awclick.php?mid=1234&id=5678&clickref={{SubId}}', 'http://www.awin1.com/awclick.php?afsrc=1&mid=1234&id=5678&clickref={{SubId}}'],
  ],

  affilinet: {
    alternates: ['at', 'ch', 'de', 'es', 'fr', 'nl', 'uk'].map(x => 'affilinet-'+x),
    tests: [
      ['http://being.successfultogether.co.uk/click.asp?ref=1234&site=5678&type=text&tnb=15', 'http://being.successfultogether.co.uk/click.asp?afsrc=1&ref=1234&site=5678&type=text&tnb=15&subid={{SubId}}'],
      ['http://being.successfultogether.co.uk/click.asp?ref=1234&site=5678&type=text&tnb=15&subid='+_id(), 'http://being.successfultogether.co.uk/click.asp?afsrc=1&ref=1234&site=5678&type=text&tnb=15&subid={{SubId}}'],
      ['http://being.successfultogether.co.uk/click.asp?ref=1234&site=5678&type=text&tnb=15&subid={{SubId}}', 'http://being.successfultogether.co.uk/click.asp?afsrc=1&ref=1234&site=5678&type=text&tnb=15&subid={{SubId}}'],
    ]
  },

  avantlink: {
    alternates: ['avantlink-us', 'avantlink-ca'],
    tests: [
      ['http://www.avantlink.com/click.php?tt=cl&mi=1234&pw=5678&url=http%3A%2F%2Fwww.website.com', 'http://www.avantlink.com/click.php?afsrc=1&tt=cl&mi=1234&pw=5678&url=http%3A%2F%2Fwww.website.com&ctc={{SubId}}'],
      ['http://www.avantlink.com/click.php?tt=cl&mi=1234&pw=5678&url=http%3A%2F%2Fwww.website.com&ctc='+_id(), 'http://www.avantlink.com/click.php?afsrc=1&tt=cl&mi=1234&pw=5678&url=http%3A%2F%2Fwww.website.com&ctc={{SubId}}'],
      ['http://www.avantlink.com/click.php?tt=cl&mi=1234&pw=5678&url=http%3A%2F%2Fwww.website.com&ctc={{SubId}}', 'http://www.avantlink.com/click.php?afsrc=1&tt=cl&mi=1234&pw=5678&url=http%3A%2F%2Fwww.website.com&ctc={{SubId}}'],
    ],
  },

  belboon: [
    ['https://www1.belboon.de/adtracking/1234567890abcdef.html', 'https://www1.belboon.de/adtracking/1234567890abcdef.html/subid={{SubId}}/?afsrc=1'],
    ['https://www1.belboon.de/adtracking/1234567890abcdef.html/subid='+_id()+'/', 'https://www1.belboon.de/adtracking/1234567890abcdef.html/subid={{SubId}}/?afsrc=1'],
    ['https://www1.belboon.de/adtracking/1234567890abcdef.html/subid={{SubId}}/', 'https://www1.belboon.de/adtracking/1234567890abcdef.html/subid={{SubId}}/?afsrc=1'],
  ],

  commissionfactory: [
    ['https://t.cfjump.com/t/12345/67890/', 'https://t.cfjump.com/t/12345/67890/?afsrc=1&UniqueId={{SubId}}'],
    ['https://t.cfjump.com/t/12345/67890/?UniqueId='+_id(), 'https://t.cfjump.com/t/12345/67890/?afsrc=1&UniqueId={{SubId}}'],
    ['https://t.cfjump.com/t/12345/67890/?UniqueId={{SubId}}', 'https://t.cfjump.com/t/12345/67890/?afsrc=1&UniqueId={{SubId}}'],
  ],

  commissionjunction: {
    alternates: ['commissionjunction-us', 'commissionjunction-eu'],
    tests: [
      ['http://www.dpbolvw.net/click-7811975-10250-1407354254000', 'http://www.dpbolvw.net/click-7811975-10250-1407354254000?afsrc=1&sid={{SubId}}'],
      ['http://www.dpbolvw.net/click-7811975-10250-1407354254000?sid='+_id(), 'http://www.dpbolvw.net/click-7811975-10250-1407354254000?afsrc=1&sid={{SubId}}'],
      ['http://www.dpbolvw.net/click-7811975-10250-1407354254000?sid={{SubId}}', 'http://www.dpbolvw.net/click-7811975-10250-1407354254000?afsrc=1&sid={{SubId}}'],
    ],
  },

  impactradius: [
    ['http://ishopstyle.ojrq.net/c/123/456/789', 'http://ishopstyle.ojrq.net/c/123/456/789?afsrc=1&SubId1={{SubId}}'],
    ['http://ishopstyle.ojrq.net/c/123/456/789?SubId1='+_id(), 'http://ishopstyle.ojrq.net/c/123/456/789?afsrc=1&SubId1={{SubId}}'],
    ['http://ishopstyle.ojrq.net/c/123/456/789?SubId1={{SubId}}', 'http://ishopstyle.ojrq.net/c/123/456/789?afsrc=1&SubId1={{SubId}}'],
  ],

  apdperformance: [
    ['http://t.dgm-au.com/c/123/456/789', 'http://t.dgm-au.com/c/123/456/789?afsrc=1&SubId1={{SubId}}'],
    ['http://t.dgm-au.com/c/123/456/789?SubId1='+_id(), 'http://t.dgm-au.com/c/123/456/789?afsrc=1&SubId1={{SubId}}'],
    ['http://t.dgm-au.com/c/123/456/789?SubId1={{SubId}}', 'http://t.dgm-au.com/c/123/456/789?afsrc=1&SubId1={{SubId}}'],
  ],

  linkshare: [
    ['http://ad.linksynergy.com/fs-bin/show?id=j*1sdnleRyc&bids=181133.10011664&type=3', 'http://ad.linksynergy.com/fs-bin/show?afsrc=1&id=j*1sdnleRyc&bids=181133.10011664&type=3&u1={{SubId}}'],
    ['http://ad.linksynergy.com/fs-bin/show?id=j*1sdnleRyc&bids=181133.10011664&type=3&u1='+_id(), 'http://ad.linksynergy.com/fs-bin/show?afsrc=1&id=j*1sdnleRyc&bids=181133.10011664&type=3&u1={{SubId}}'],
    ['http://ad.linksynergy.com/fs-bin/show?id=j*1sdnleRyc&bids=181133.10011664&type=3&u1={{SubId}}', 'http://ad.linksynergy.com/fs-bin/show?afsrc=1&id=j*1sdnleRyc&bids=181133.10011664&type=3&u1={{SubId}}'],
  ],

  lomadee: [
    ['http://origimgbm.buscape.com.br/sandbox/developer/offer/?app=7383&src=9262544', 'http://origimgbm.buscape.com.br/sandbox/developer/offer/?afsrc=1&app=7383&src=9262544&mdasc={{SubId}}'],
    ['http://origimgbm.buscape.com.br/sandbox/developer/offer/?app=7383&src=9262544&mdasc='+_id(), 'http://origimgbm.buscape.com.br/sandbox/developer/offer/?afsrc=1&app=7383&src=9262544&mdasc={{SubId}}'],
    ['http://origimgbm.buscape.com.br/sandbox/developer/offer/?app=7383&src=9262544&mdasc={{SubId}}', 'http://origimgbm.buscape.com.br/sandbox/developer/offer/?afsrc=1&app=7383&src=9262544&mdasc={{SubId}}'],
  ],

  omgpm: {
    alternates: ['asia', 'australia', 'brazil', 'india', 'uk'].map(x => 'omgpm-'+x),
    tests: [
      ['https://track.in.omgpm.com/?AID=123&PID=456&CID=789&MID=012', 'https://track.in.omgpm.com/?afsrc=1&AID=123&PID=456&CID=789&MID=012&UID={{SubId}}'],
      ['https://track.in.omgpm.com/?AID=123&PID=456&CID=789&MID=012&UID='+_id(), 'https://track.in.omgpm.com/?afsrc=1&AID=123&PID=456&CID=789&MID=012&UID={{SubId}}'],
      ['https://track.in.omgpm.com/?AID=123&PID=456&CID=789&MID=012&UID={{SubId}}', 'https://track.in.omgpm.com/?afsrc=1&AID=123&PID=456&CID=789&MID=012&UID={{SubId}}'],
    ],
  },

  partnerads: [
    ['http://www.partner-ads.com/dk/klikbanner.php?partnerid=20147&bannerid=27824&htmlurl=', 'http://www.partner-ads.com/dk/klikbanner.php?afsrc=1&partnerid=20147&bannerid=27824&htmlurl=&uid={{SubId}}'],
    ['http://www.partner-ads.com/dk/klikbanner.php?partnerid=20147&bannerid=27824&htmlurl=&uid='+_id(), 'http://www.partner-ads.com/dk/klikbanner.php?afsrc=1&partnerid=20147&bannerid=27824&htmlurl=&uid={{SubId}}'],
    ['http://www.partner-ads.com/dk/klikbanner.php?partnerid=20147&bannerid=27824&htmlurl=&uid={{SubId}}', 'http://www.partner-ads.com/dk/klikbanner.php?afsrc=1&partnerid=20147&bannerid=27824&htmlurl=&uid={{SubId}}'],
  ],

  pepperjam: [
    ['http://www.pntra.com/t/2-135125-132645-228', 'http://www.pntra.com/t/2-135125-132645-228?afsrc=1&sid={{SubId}}'],
    ['http://www.pntra.com/t/2-135125-132645-228?sid='+_id(), 'http://www.pntra.com/t/2-135125-132645-228?afsrc=1&sid={{SubId}}'],
    ['http://www.pntra.com/t/2-135125-132645-228?sid={{SubId}}', 'http://www.pntra.com/t/2-135125-132645-228?afsrc=1&sid={{SubId}}'],
  ],

  publicideas: {
    alternates: ['fr', 'it', 'es', 'latam', 'uk'].map(x => 'publicideas-'+x),
    tests: [
      ['http://tracking.publicidees.com/clic.php?promoid=123&progid=456&partid=789', 'http://tracking.publicidees.com/clic.php?afsrc=1&promoid=123&progid=456&partid=789&cb={{SubId}}'],
      ['http://tracking.publicidees.com/clic.php?promoid=123&progid=456&partid=789&cb='+_id(), 'http://tracking.publicidees.com/clic.php?afsrc=1&promoid=123&progid=456&partid=789&cb={{SubId}}'],
      ['http://tracking.publicidees.com/clic.php?promoid=123&progid=456&partid=789&cb={{SubId}}', 'http://tracking.publicidees.com/clic.php?afsrc=1&promoid=123&progid=456&partid=789&cb={{SubId}}'],
    ],
  },

  shareasale: [
    ['http://www.shareasale.com/r.cfm?b=123&u=456&m=789', 'http://www.shareasale.com/r.cfm?afsrc=1&b=123&u=456&m=789&afftrack={{SubId}}'],
    ['http://www.shareasale.com/r.cfm?b=123&u=456&m=789&afftrack='+_id(), 'http://www.shareasale.com/r.cfm?afsrc=1&b=123&u=456&m=789&afftrack={{SubId}}'],
    ['http://www.shareasale.com/r.cfm?b=123&u=456&m=789&afftrack={{SubId}}', 'http://www.shareasale.com/r.cfm?afsrc=1&b=123&u=456&m=789&afftrack={{SubId}}'],
  ],

  tradetracker: {
    alernates: ['at', 'ch', 'cz', 'de', 'dk', 'es', 'fi', 'fr', 'gb', 'no', 'ru', 'se'].map(x=>'tradetracker-'+x),
    tests: [
      ['http://tc.tradetracker.net/?c=1158&m=290650&a=227214&r=&u=', 'http://tc.tradetracker.net/?c=1158&m=290650&a=227214&r={{SubId}}&u='],
      ['http://tc.tradetracker.net/?c=1158&m=290650&a=227214&r='+_id()+'&u=', 'http://tc.tradetracker.net/?c=1158&m=290650&a=227214&r={{SubId}}&u='],
      ['http://tc.tradetracker.net/?c=1158&m=290650&a=227214&r={{SubId}}&u=', 'http://tc.tradetracker.net/?c=1158&m=290650&a=227214&r={{SubId}}&u='],
    ],
  },

  webgains: [
    ['http://track.webgains.com/click.html?wgcampaignid=mycampaignid&wgprogramid=106', 'http://track.webgains.com/click.html?afsrc=1&wgcampaignid=mycampaignid&wgprogramid=106&clickref={{SubId}}'],
    ['http://track.webgains.com/click.html?wgcampaignid=mycampaignid&wgprogramid=106&clickref='+_id(), 'http://track.webgains.com/click.html?afsrc=1&wgcampaignid=mycampaignid&wgprogramid=106&clickref={{SubId}}'],
    ['http://track.webgains.com/click.html?wgcampaignid=mycampaignid&wgprogramid=106&clickref={{SubId}}', 'http://track.webgains.com/click.html?afsrc=1&wgcampaignid=mycampaignid&wgprogramid=106&clickref={{SubId}}'],
  ],

  zanox: [
    ['http://www.zanox-affiliate.de/ppc/?32400365C29773394&zpar9=[[05523FA4A5AB834CA23D]]', 'http://www.zanox-affiliate.de/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://www.zanox-affiliate.de/ppc/?32400365C29773394&zpar9=[[05523FA4A5AB834CA23D]]&zpar0='+_id(), 'http://www.zanox-affiliate.de/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://www.zanox-affiliate.de/ppc/?32400365C29773394&zpar9=[[05523FA4A5AB834CA23D]]&zpar0={{SubId}}', 'http://www.zanox-affiliate.de/ppc/?32400365C29773394&afsrc=1&zpar9=[[05523FA4A5AB834CA23D]]&zpar0={{SubId}}'],
    ['http://www.zanox-affiliate.de/ppc/?32400365C29773394&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D', 'http://www.zanox-affiliate.de/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://www.zanox-affiliate.de/ppc/?32400365C29773394&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0='+_id(), 'http://www.zanox-affiliate.de/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://www.zanox-affiliate.de/ppc/?32400365C29773394&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}', 'http://www.zanox-affiliate.de/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://ad.zanox.com/ppc/?32400365C29773394&zpar9=[[05523FA4A5AB834CA23D]]', 'http://ad.zanox.com/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://ad.zanox.com/ppc/?32400365C29773394&zpar9=[[05523FA4A5AB834CA23D]]&zpar0='+_id(), 'http://ad.zanox.com/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://ad.zanox.com/ppc/?32400365C29773394&zpar9=[[05523FA4A5AB834CA23D]]&zpar0={{SubId}}', 'http://ad.zanox.com/ppc/?32400365C29773394&afsrc=1&zpar9=[[05523FA4A5AB834CA23D]]&zpar0={{SubId}}'],
    ['http://ad.zanox.com/ppc/?32400365C29773394&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D', 'http://ad.zanox.com/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://ad.zanox.com/ppc/?32400365C29773394&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0='+_id(), 'http://ad.zanox.com/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
    ['http://ad.zanox.com/ppc/?32400365C29773394&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}', 'http://ad.zanox.com/ppc/?32400365C29773394&afsrc=1&zpar9=%5B%5B05523FA4A5AB834CA23D%5D%5D&zpar0={{SubId}}'],
  ],

  tradedoubler: [
    ['http://clkuk.tradedoubler.com/click?p=202317&a=2511389&g=19430638', 'http://clkuk.tradedoubler.com/click?p(202317)a(2511389)g(19430638)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clkuk.tradedoubler.com/click?p=202317&a=2511389&g=19430638&epi='+_id(), 'http://clkuk.tradedoubler.com/click?p(202317)a(2511389)g(19430638)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clkuk.tradedoubler.com/click?p=202317&a=2511389&g=19430638&epi={{SubId}}', 'http://clkuk.tradedoubler.com/click?p(202317)a(2511389)g(19430638)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clk.tradedoubler.com/click?p(46)a(2511414)', 'http://clk.tradedoubler.com/click?p(46)a(2511414)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clk.tradedoubler.com/click?p(46)a(2511414)epi('+_id()+')', 'http://clk.tradedoubler.com/click?p(46)a(2511414)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clk.tradedoubler.com/click?p(46)a(2511414)epi({{SubId}})', 'http://clk.tradedoubler.com/click?p(46)a(2511414)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clk.tradedoubler.com/click?p(46)epi('+_id()+')a(2511414)', 'http://clk.tradedoubler.com/click?p(46)a(2511414)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clk.tradedoubler.com/click?p(46)epi({{SubId}})a(2511414)', 'http://clk.tradedoubler.com/click?p(46)a(2511414)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clk.tradedoubler.com/click?epi('+_id()+')p(46)a(2511414)', 'http://clk.tradedoubler.com/click?p(46)a(2511414)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
    ['http://clk.tradedoubler.com/click?epi({{SubId}})p(46)a(2511414)', 'http://clk.tradedoubler.com/click?p(46)a(2511414)extid({{SubId}})exttype(0)epi({{SubId}})afsrc(1)'],
  ],

  vcommission: [
    ['http://tracking.vcommission.com/aff_c?offer_id=1234&aff_id=5678', 'http://tracking.vcommission.com/aff_c?afsrc=1&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
    ['http://tracking.vcommission.com/aff_c?offer_id=1234&aff_id=5678&aff_sub='+_id(), 'http://tracking.vcommission.com/aff_c?afsrc=1&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
    ['http://tracking.vcommission.com/aff_c?offer_id=1234&aff_id=5678&aff_sub={{SubId}}', 'http://tracking.vcommission.com/aff_c?afsrc=1&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
  ],

  snapdeal: [
    ['http://www.snapdeal.com/?utm_source=aff_prog&utm_campaign=afts&offer_id=1234&aff_id=5678', 'http://www.snapdeal.com/?afsrc=1&utm_source=aff_prog&utm_campaign=afts&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
    ['http://www.snapdeal.com/?utm_source=aff_prog&utm_campaign=afts&offer_id=1234&aff_id=5678&aff_sub='+_id(), 'http://www.snapdeal.com/?afsrc=1&utm_source=aff_prog&utm_campaign=afts&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
    ['http://www.snapdeal.com/?utm_source=aff_prog&utm_campaign=afts&offer_id=1234&aff_id=5678&aff_sub={{SubId}}', 'http://www.snapdeal.com/?afsrc=1&utm_source=aff_prog&utm_campaign=afts&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
  ],

  shopstylers: [
    ['http://tracking.shopstylers.com/aff_c?offer_id=1234&aff_id=5678', 'http://tracking.shopstylers.com/aff_c?afsrc=1&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
    ['http://tracking.shopstylers.com/aff_c?offer_id=1234&aff_id=5678&aff_sub='+_id(), 'http://tracking.shopstylers.com/aff_c?afsrc=1&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
    ['http://tracking.shopstylers.com/aff_c?offer_id=1234&aff_id=5678&aff_sub={{SubId}}', 'http://tracking.shopstylers.com/aff_c?afsrc=1&offer_id=1234&aff_id=5678&aff_sub={{SubId}}'],
  ],

};

Object.keys(NETWORKS).forEach(name => {
  let net = NETWORKS[name];
  if (_.isArray(net)) {
    net = NETWORKS[name] = {tests: net, alternates: []};
  }
  const tests = net.tests;
  tests.push(['', '']);
  tests.push([null, '']);
  tests.push([undefined, '']);
  tests.push(['some-string-which-isnt-a-url', '']);
});

// https://www.adcell.de/promotion/click/promoId/93601/slotId/7371

describe('utils.addSubIdToTrackingUrl', () => {
  Object.keys(NETWORKS).sort().forEach(name => {
    let NET = NETWORKS[name];
    const alternates = NET.alternates || [];
    const all = [name].concat(alternates);
    const tests = NET.tests;
    all.forEach(networkName => {
      describe('With network '+networkName, () => {
        tests.forEach(test => {
          const IN = test[0];
          const OUT = test[1];
          describe('When given `'+IN+'`', () => {
            it('Returns `'+OUT +'`', () => {
              const ret = addSubIdToTrackingUrl(networkName, IN);
              expect(ret).to.equal(OUT);
            });
          });
        });
      });
    });
  });
});
