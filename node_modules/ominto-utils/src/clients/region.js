'use strict';

let dataClient;

function * getRegionById (regionId, ctx) {
  let result = yield dataClient.get('/getRegionById/' + regionId + '/', null, ctx);
  ctx.assert(result.statusCode !== 404, 404, 'Region not found', {internalCode: 150});
  return result.body;
}

function * getAllActiveRegions (ctx) {
  let result = yield dataClient.get('/getRegions/', null, ctx);
  ctx.assert(result.statusCode !== 404, 404, 'No regions found', {internalCode: 151});
  return result.body;
}

module.exports = function init (config) {
  dataClient = require('../utils/rest-client')(config.data_api, false);
  return {
    getRegionById: getRegionById,
    getAllActiveRegions: getAllActiveRegions
  };
};
