'use strict';

let dataClient;

function * getAllActivePages (region, language, ctx) {
  let result = yield dataClient.get('/searchPages/', {region: region, language: language}, ctx);
  ctx.assert(result.statusCode !== 404, 404, 'No Pages found', {internalCode: 151});
  return result.body;
}

module.exports = function init (config) {
  dataClient = require('../utils/rest-client')(config.data_api, false);
  return {
    getAllActivePages: getAllActivePages
  };
};
