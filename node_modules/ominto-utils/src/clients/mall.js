'use strict';

//const toQueryString = require('../utils/url').toQueryString;
const helpers = require('./helpers');

let dataClient;

module.exports = function init (configs) {
  dataClient = require('../utils').getDataClient(configs.data_api.internalUrl, configs.data_api.auth);
  return {
    getMallById: getMallById
  };
};

function * getMallById (id, bypassCache, ctx) {
  let result = yield dataClient.get(helpers.setRequestPayload('/getMallById/' + id, ctx));
  ctx.assert(result.statusCode === 200, 500, 'Unexpected result from data service during getMallById', {
    res: result,
    id: id,
    internalCode: 351
  });
  return result.body;
}
