'use strict';

var _ = require('lodash');
var Joi = require('joi');

function splitObjectBySchemaDef (input, schema) {
  var validateResult = Joi.validate(input, schema, {convert: false, stripUnknown: true});
  if (validateResult.error !== null) {
    throw validateResult.error;
  } else {
    var sanitizedInput = validateResult.value;
    var extraVals = _.omit(input, Object.keys(sanitizedInput));

    return {
      sanitized: sanitizedInput,
      additional: extraVals
    };
  }
}

module.exports = splitObjectBySchemaDef;
